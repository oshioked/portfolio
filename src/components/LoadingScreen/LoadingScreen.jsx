import React from 'react';
import './LoadingScreen.scss';
import { useRef } from 'react';
import { useEffect } from 'react';
import gsap from 'gsap/gsap-core';

const LoadingScreen = () =>{
    const roleRef = useRef(null);
    const svgRef = useRef(null);
    const screenRef = useRef(null);
    
    useEffect(()=>{
        const paths = [...svgRef.current.children];

        const tl = gsap.timeline();
        tl
        .to([roleRef.current, svgRef.current], {
            autoAlpha: 1,
            duration: .5
        })
        .from(paths, {
            yPercent: 130,
            duration: .3,
            autoAlpha: 0,
            stagger: .1
        })
        .to(paths, {
            fill: 'white',
            duration: .2,
            stagger: .1
        }, '-=1')
        .from(roleRef.current.children, {
            yPercent: 100,
            duration: .5,
            onStart: ()=>window.scrollTo(0, 0),
        }, '+=.3')
        .to([paths, roleRef.current.children], {
            yPercent: 150,
            duration: .5,
        }, '+=1')
        .to(screenRef.current, {
            yPercent: -100,
            duration: 1.3,
            ease: 'power3.inOut'
        }, '-=.3')
    }, [])

    return(
        <div ref = {screenRef} className = "loading-screen">
            <div className = "name-container">
            <div className = "name-svg">
                <svg ref = {svgRef} width="843" height="79" viewBox="0 0 843 79" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M36.5742 1.31836C49.237 1.31836 58.612 5.38737 64.6992 13.5254C69.4518 19.873 71.8281 27.9948 71.8281 37.8906C71.8281 48.6003 69.11 57.5033 63.6738 64.5996C57.2936 72.9329 48.1953 77.0996 36.3789 77.0996C25.3438 77.0996 16.6686 73.4538 10.3535 66.1621C4.72201 59.1309 1.90625 50.2441 1.90625 39.502C1.90625 29.8014 4.3151 21.5007 9.13281 14.5996C15.3177 5.74544 24.4648 1.31836 36.5742 1.31836ZM37.5508 68.4082C46.112 68.4082 52.2969 65.3483 56.1055 59.2285C59.9466 53.0762 61.8672 46.0124 61.8672 38.0371C61.8672 29.6061 59.6536 22.819 55.2266 17.6758C50.832 12.5326 44.8099 9.96094 37.1602 9.96094C29.7383 9.96094 23.6836 12.5163 18.9961 17.627C14.3086 22.7051 11.9648 30.2083 11.9648 40.1367C11.9648 48.0794 13.9668 54.7852 17.9707 60.2539C22.0072 65.6901 28.5339 68.4082 37.5508 68.4082Z" stroke="white" stroke-width="2" mask="url(#path-1-outside-1)"/>
                <path d="M89.7969 51.8555C90.0247 55.9245 90.985 59.2285 92.6777 61.7676C95.9004 66.5202 101.581 68.8965 109.719 68.8965C113.365 68.8965 116.685 68.3757 119.68 67.334C125.474 65.3158 128.371 61.7025 128.371 56.4941C128.371 52.5879 127.15 49.8047 124.709 48.1445C122.235 46.5169 118.361 45.1009 113.088 43.8965L103.371 41.6992C97.0234 40.2669 92.5312 38.6882 89.8945 36.9629C85.3372 33.9681 83.0586 29.4922 83.0586 23.5352C83.0586 17.0898 85.2884 11.8001 89.748 7.66602C94.2077 3.5319 100.523 1.46484 108.693 1.46484C116.213 1.46484 122.593 3.28776 127.834 6.93359C133.107 10.5469 135.744 16.3411 135.744 24.3164H126.613C126.125 20.4753 125.083 17.5293 123.488 15.4785C120.526 11.735 115.497 9.86328 108.4 9.86328C102.671 9.86328 98.5534 11.0677 96.0469 13.4766C93.5404 15.8854 92.2871 18.6849 92.2871 21.875C92.2871 25.3906 93.752 27.9622 96.6816 29.5898C98.6022 30.6315 102.948 31.9336 109.719 33.4961L119.777 35.791C124.628 36.8978 128.371 38.4115 131.008 40.332C135.565 43.6849 137.844 48.5514 137.844 54.9316C137.844 62.8743 134.947 68.5547 129.152 71.9727C123.391 75.3906 116.685 77.0996 109.035 77.0996C100.116 77.0996 93.1335 74.821 88.0879 70.2637C83.0423 65.7389 80.5684 59.6029 80.666 51.8555H89.7969Z" stroke="white" stroke-width="2" mask="url(#path-1-outside-1)"/>
                <path d="M150.393 3.27148H160.207V32.9102H197.512V3.27148H207.326V75H197.512V41.4551H160.207V75H150.393V3.27148Z" stroke="white" stroke-width="2" mask="url(#path-1-outside-1)"/>
                <path d="M224.611 3.27148H234.426V75H224.611V3.27148Z" stroke="white" stroke-width="2" mask="url(#path-1-outside-1)"/>
                <path d="M281.203 1.31836C293.866 1.31836 303.241 5.38737 309.328 13.5254C314.081 19.873 316.457 27.9948 316.457 37.8906C316.457 48.6003 313.739 57.5033 308.303 64.5996C301.923 72.9329 292.824 77.0996 281.008 77.0996C269.973 77.0996 261.298 73.4538 254.982 66.1621C249.351 59.1309 246.535 50.2441 246.535 39.502C246.535 29.8014 248.944 21.5007 253.762 14.5996C259.947 5.74544 269.094 1.31836 281.203 1.31836ZM282.18 68.4082C290.741 68.4082 296.926 65.3483 300.734 59.2285C304.576 53.0762 306.496 46.0124 306.496 38.0371C306.496 29.6061 304.283 22.819 299.855 17.6758C295.461 12.5326 289.439 9.96094 281.789 9.96094C274.367 9.96094 268.312 12.5163 263.625 17.627C258.938 22.7051 256.594 30.2083 256.594 40.1367C256.594 48.0794 258.596 54.7852 262.6 60.2539C266.636 65.6901 273.163 68.4082 282.18 68.4082Z" stroke="white" stroke-width="2" mask="url(#path-1-outside-1)"/>
                <path d="M328.078 3.27148H337.551V38.2324L372.512 3.27148H385.939L356.105 32.1777L386.77 75H374.123L349.025 39.0137L337.551 50V75H328.078V3.27148Z" stroke="white" stroke-width="2" mask="url(#path-1-outside-1)"/>
                <path d="M395.705 3.27148H448V12.0605H405.178V33.8379H444.777V42.1387H405.178V66.4551H448.732V75H395.705V3.27148Z" stroke="white" stroke-width="2" mask="url(#path-1-outside-1)"/>
                <path d="M516.848 66.6992C520.135 66.6992 522.837 66.3574 524.953 65.6738C528.729 64.4043 531.822 61.9629 534.23 58.3496C536.151 55.4525 537.535 51.7415 538.381 47.2168C538.869 44.515 539.113 42.0085 539.113 39.6973C539.113 30.8105 537.339 23.9095 533.791 18.9941C530.275 14.0788 524.595 11.6211 516.75 11.6211H499.514V66.6992H516.848ZM489.748 3.27148H518.801C528.664 3.27148 536.314 6.77083 541.75 13.7695C546.6 20.0846 549.025 28.1738 549.025 38.0371C549.025 45.6543 547.593 52.5391 544.729 58.6914C539.683 69.5638 531.008 75 518.703 75H489.748V3.27148Z" stroke="white" stroke-width="2" mask="url(#path-1-outside-1)"/>
                <path d="M598.391 45.6055L587.502 13.916L575.93 45.6055H598.391ZM582.424 3.27148H593.41L619.436 75H608.791L601.516 53.5156H573.146L565.383 75H555.422L582.424 3.27148Z" stroke="white" stroke-width="2" mask="url(#path-1-outside-1)"/>
                <path d="M628.273 3.27148H639.748L675.979 61.377V3.27148H685.207V75H674.318L637.551 16.9434V75H628.273V3.27148Z" stroke="white" stroke-width="2" mask="url(#path-1-outside-1)"/>
                <path d="M702.736 3.27148H712.551V75H702.736V3.27148Z" stroke="white" stroke-width="2" mask="url(#path-1-outside-1)"/>
                <path d="M729.299 3.27148H781.594V12.0605H738.771V33.8379H778.371V42.1387H738.771V66.4551H782.326V75H729.299V3.27148Z" stroke="white" stroke-width="2" mask="url(#path-1-outside-1)"/>
                <path d="M795.07 3.27148H804.787V66.4551H841.115V75H795.07V3.27148Z" stroke="white" stroke-width="2" mask="url(#path-1-outside-1)"/>
                </svg>
        </div>
            </div>
            <div ref = {roleRef} className = "role-container">
                <h1>FULLSTACK DEVELOPER</h1>
            </div>
        </div>
    )
}

export default LoadingScreen;